@model string
<!DOCTYPE html>
<html>

<head>
    <title>Map Features</title>
</head>

<body>
    <div id="map" style="width: 100%; height: 700px;"></div>
    <script>
        var geoJsonData = @Html.Raw(Model); // Embed the model data directly in the page
        document.addEventListener('DOMContentLoaded', function () {
            var mymap = L.map('map').setView([49.4925, -117.2942], 13);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 18,
            }).addTo(mymap);

            // Add the GeoJSON data directly to the map
            L.geoJSON(geoJsonData, {
                onEachFeature: function (feature, layer) {
                    if (feature.properties && feature.properties.PointName) {
                        layer.bindPopup(feature.properties.PointName);
                    } else {
                        console.log("no description found"); // Logs this message to the browser console
                    }
                }
            }).addTo(mymap);

            // Array to store the coordinates of each point
            var latlngs = [];

            // Extract coordinates from GeoJSON
            geoJsonData.features.forEach(function (feature) {
                if (feature.geometry.type === 'Point') {
                    latlngs.push([feature.geometry.coordinates[1], feature.geometry.coordinates[0]]);
                }
            });

            // Create a polyline and add it to the map
            var polyline = L.polyline(latlngs, { color: 'red' }).addTo(mymap);
        });
    </script>
    @if (ViewBag.Message != null)
    {
        <p>@ViewBag.Message</p>
    }
</body>

</html>
